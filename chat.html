
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Doubts Chat</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    font-family: 'Baloo 2', cursive;
    background: #3e2c1c;
    color: #fff8e7;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  .chat-container {
    width: 90%;
    max-width: 600px;
    background: #5b3e2c;
    border-radius: 15px;
    box-shadow: 0 5px 25px rgba(0,0,0,0.6);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    height: 80vh;
  }

  .chat-header {
    background: #7b4b2b;
    padding: 15px;
    text-align: center;
    font-size: 1.6rem;
    font-weight: bold;
    box-shadow: 0 2px 5px rgba(0,0,0,0.4);
  }

  .chat-body {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 12px;
    background: #5b3e2c;
  }

  .message {
    max-width: 75%;
    padding: 10px 15px;
    border-radius: 15px;
    position: relative;
    word-wrap: break-word;
    color: #fff8e7;
    font-size: 1rem;
    line-height: 1.3;
  }

  .message span.time {
    font-size: 0.7rem;
    opacity: 0.7;
    display: block;
    text-align: right;
    margin-top: 5px;
  }

  .message button {
    position: absolute;
    top: 5px;
    right: 5px;
    background: rgba(0,0,0,0.2);
    border: none;
    color: #fff8e7;
    cursor: pointer;
    font-size: 0.7rem;
    border-radius: 3px;
    padding: 2px 4px;
  }

  .message.self {
    align-self: flex-end;
    background: #8b5e3c;
  }

  .message.other {
    align-self: flex-start;
    background: #a9745b;
  }

  .chat-input {
    display: flex;
    border-top: 2px solid #7b4b2b;
  }

  .chat-input input {
    flex: 1;
    padding: 12px;
    border: none;
    outline: none;
    font-size: 1rem;
    border-radius: 0;
    background: #6b452d;
    color: #fff8e7;
  }

  .chat-input button {
    background: #7b4b2b;
    border: none;
    padding: 12px 20px;
    cursor: pointer;
    color: #fff8e7;
    font-weight: bold;
    transition: background 0.2s ease;
  }

  .chat-input button:hover {
    background: #8b5e3c;
  }
</style>
</head>
<body>

<div class="chat-container">
  <div class="chat-header">Doubts</div>
  <div class="chat-body" id="chatBody"></div>
  <div class="chat-input">
    <input type="text" id="messageInput" placeholder="Type your doubt...">
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<script>
  const chatBody = document.getElementById('chatBody');
  const messageInput = document.getElementById('messageInput');

  // Temporary random color for user to simulate different users
  const userColor = '#' + Math.floor(Math.random()*16777215).toString(16);
  
  let messages = JSON.parse(localStorage.getItem('doubtsMessages')) || [];
  messages.forEach(msg => renderMessage(msg));

  function saveMessages() {
    localStorage.setItem('doubtsMessages', JSON.stringify(messages));
  }

  function renderMessage(msg) {
    const div = document.createElement('div');
    div.className = 'message ' + (msg.self ? 'self' : 'other');
    div.dataset.id = msg.id;
    div.style.background = msg.self ? '#8b5e3c' : '#a9745b';
    div.innerHTML = `
      ${msg.text}
      <span class="time">${msg.time}</span>
      <button onclick="editMessage('${msg.id}')">Edit</button>
      <button onclick="deleteMessage('${msg.id}')">Delete</button>
    `;
    chatBody.appendChild(div);
    chatBody.scrollTop = chatBody.scrollHeight;
  }

  function sendMessage() {
    const text = messageInput.value.trim();
    if(!text) return;

    const now = new Date();
    const time = now.getHours().toString().padStart(2,'0') + ':' + now.getMinutes().toString().padStart(2,'0');
    const id = Date.now().toString();

    const msg = {id, text, self: true, time};
    messages.push(msg);
    saveMessages();
    renderMessage(msg);
    messageInput.value = '';
  }

  function deleteMessage(id) {
    messages = messages.filter(m => m.id !== id);
    saveMessages();
    const div = document.querySelector(`.message[data-id='${id}']`);
    if(div) chatBody.removeChild(div);
  }

  function editMessage(id) {
    const msg = messages.find(m => m.id === id);
    if(!msg) return;
    const newText = prompt("Edit your message:", msg.text);
    if(newText !== null) {
      msg.text = newText;
      saveMessages();
      const div = document.querySelector(`.message[data-id='${id}']`);
      if(div) div.childNodes[0].textContent = newText;
    }
  }

  messageInput.addEventListener('keypress', function(e){
    if(e.key === 'Enter') sendMessage();
  });
</script>

</body>
</html>
